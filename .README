# Proyecto de Testing con Playwright

Este proyecto utiliza https://playwright.dev/ para realizar pruebas automatizadas. A continuaciÃ³n, se describen los pasos para configurar el entorno desde cero en Windows y ejecutar un primer test de prueba.

## ğŸš€ Requisitos previos

Antes de empezar, asegÃºrate de tener instalado lo siguiente:

- Node.js y npm: https://nodejs.org/ (npm viene incluido con Node.js)
- Visual Studio Code: https://code.visualstudio.com/
- Plugin de VS Code: Playwright Test for VS Code

## ğŸ› ï¸ InicializaciÃ³n del Proyecto

1. Inicializa un nuevo proyecto de Playwright

Abre una terminal en la carpeta de tu proyecto y ejecuta:

npm init playwright@latest

Durante la instalaciÃ³n, Playwright te harÃ¡ algunas preguntas:

- Selecciona el lenguaje (JavaScript o TypeScript)
- Selecciona el entorno (Node.js)
- Elige los navegadores que deseas instalar (Chromium, Firefox, WebKit)
- Si quieres incluir ejemplos de prueba (puedes decir que sÃ­ para empezar con algo bÃ¡sico)

2. Abre el proyecto en Visual Studio Code

AsegÃºrate de tener el plugin â€œPlaywright Test for VS Codeâ€ instalado para acceder a funcionalidades como correr pruebas desde la interfaz.

## ğŸ§ª Ejecutar el primer test

Si instalaste los ejemplos, deberÃ­as tener un archivo como tests/example.spec.js.

ğŸš€ Para correr las pruebas:

npx playwright test

ğŸš€ TambiÃ©n puedes usar el botÃ³n â€œRun Testâ€ en VS Code si tienes el plugin instalado.

ğŸš€ Para correr un test especifico una opcion es indicarle su ruta exacta:

`npx playwright test tests/specs/01-login.spec.ts `

ğŸš€ Playwright permite correr por el tÃ­tulo del test:

`npx playwright test -g "should login successfully with standard user"`

ğŸš€ Esto permite escribir una descripcion generica de la suite en el test.describe y asi correr mediante esa descripcion:

test.describe('Login scenarios', () => {
  ...
});

npx playwright test -g "Login scenarios"

ğŸš€ Si quieres correr multiples archivos relacionados con login, puedes organizarlo por carpeta:

tests/
â”œâ”€â”€ login/
â”‚   â””â”€â”€ login.spec.ts
â”œâ”€â”€ inventory/
â”‚   â””â”€â”€ inventory.spec.ts

npx playwright test tests/login

ğŸš€ Por ultimo si quieres correr los test marcados con .only:

test.only('should login with valid user', async ({ loginPage }) => {
  ...
});

npx playwright test

### Visualizar reporte HTML interactivo

Si quieres ver un reporte visual, corre:
npx playwright show-report

Esto abrirÃ¡ tu navegador predeterminado con un reporte muy claro de:

- Cada test ejecutado
- DuraciÃ³n
- Screenshots (si los capturas)
- Video (si estÃ¡ configurado)
- Stacktrace en caso de fallos

TambiÃ©n puedes acceder manualmente al archivo generado en la carpeta: playwright-report/index.html

### ğŸŒ Ejecutar los tests solo en Chromium
Por defecto, Playwright ejecuta los tests en Chromium, Firefox y WebKit. Si deseas correr los tests Ãºnicamente en Chromium, tienes dos opciones:

#### ğŸ”§ OpciÃ³n 1: Configurar playwright.config.ts
Abre el archivo playwright.config.ts y reemplaza el bloque projects por el siguiente:

```
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests',
  projects: [
    {
      name: 'chromium',
      use: {
        ...devices['Desktop Chrome'],
      },
    },
  ],
});
```
#### ğŸ–¥ï¸ OpciÃ³n 2: Ejecutar directamente desde CLI
Si prefieres mantener la configuraciÃ³n con varios navegadores, puedes ejecutar tus pruebas en Chromium con el siguiente comando:
npx playwright test --project=chromium

## ğŸ‘€ Modo Headless vs. Headed

Por defecto, Playwright ejecuta las pruebas en **modo headless**, lo que significa que los navegadores se abren en segundo plano (sin interfaz grÃ¡fica visible). Esto hace que las pruebas sean mÃ¡s rÃ¡pidas y se usen menos recursos.

Si deseas **ver el navegador mientras se ejecutan los tests** (modo headed), puedes desactivar el modo headless con este comando:

``` bash
npx playwright test --headed
```

Esto es Ãºtil para depurar visualmente lo que ocurre durante la ejecuciÃ³n.

TambiÃ©n puedes configurarlo permanentemente en el archivo playwright.config.ts:

use: {
  headless: false,
}

Nota: Para entornos CI/CD, es recomendable mantener headless: true por eficiencia.

## ğŸ“ Estructura del repositorio

nombre-del-proyecto/
â”œâ”€â”€ tests/                  # Carpeta que contiene los archivos de prueba (.spec.js)
â”œâ”€â”€ playwright.config.js    # Archivo de configuraciÃ³n de Playwright
â”œâ”€â”€ package.json            # InformaciÃ³n del proyecto y scripts de npm
â”œâ”€â”€ node_modules/           # Dependencias instaladas automÃ¡ticamente
â””â”€â”€ README.md               # Este archivo de documentaciÃ³n


## ğŸ§° Notas para usuarios de Windows y PowerShell

Si estÃ¡s utilizando Windows con PowerShell y encuentras problemas al ejecutar comandos como `npx`, puede deberse a las polÃ­ticas de seguridad del sistema. AquÃ­ te dejamos algunos pasos para solucionarlo y poder ejecutar tus tests correctamente con la extensiÃ³n de Playwright Test for VS Code:

### ğŸ› ï¸ SoluciÃ³n para errores de ejecuciÃ³n de scripts en PowerShell

Si al usar `npx` recibes un mensaje como:

npx : No se puede cargar el archivo ... porque la ejecuciÃ³n de scripts estÃ¡ deshabilitada en este sistema.


Ejecuta este comando para permitir temporalmente la ejecuciÃ³n de scripts:

```
powershell
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
```

Esto habilita la ejecuciÃ³n de scripts solo para la sesiÃ³n actual y es seguro para desarrollo local.

ğŸ“¦ AsegÃºrate de instalar las dependencias correctamente
Si ves un error como:

"playwright" no se reconoce como un comando interno o externo...

Es probable que Playwright no estÃ© instalado. AsegÃºrate de instalarlo asÃ­:

npm install -D @playwright/test
npx playwright install


Esto instalarÃ¡ la librerÃ­a de pruebas y los navegadores necesarios (Chromium, Firefox y WebKit).

DespuÃ©s de esto, deberÃ­as poder correr tus tests desde:

La terminal: npx playwright test

O directamente desde VS Code con el botÃ³n "Run Test" (requiere el plugin instalado)

### 